!function(a){if("function"==typeof bootstrap)bootstrap("fruitmachine",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeFruitmachine=a}else"undefined"!=typeof window?window.fruitmachine=a():global.fruitmachine=a()}(function(){return function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b){"use strict";var c=a("./fruitmachine"),d=a("model");b.exports=c({Model:d})},{"./fruitmachine":2,model:3}],4:[function(a,b){"use strict";b.exports=function(a){return function(b){var c="object"==typeof b?a.Module.extend(b):b,d=c.prototype,e=d.name||d._module;return e&&(a.modules[e]=c),c}}},{}],2:[function(a,b){"use strict";var c=a("./module"),d=a("./define"),e=a("utils"),f=a("event");b.exports=function(a){function g(a){var b=g.modules[a.module];return b?new b(a):void 0}return g.create=b.exports,g.Model=a.Model,g.Events=f,g.Module=c(g),g.define=d(g),g.util=e,g.modules={},g.config={templateIterator:"children",templateInstance:"child"},f(g)}},{"./define":4,"./module":5,event:7,utils:6}],6:[function(a,b,c){"use strict";c.bind=function(a,b){return function(){return a.apply(b,arguments)}},c.isArray=function(a){return a instanceof Array},c.mixin=function(a,b){for(var c in b)a[c]=b[c];return a},c.byId=function(a,b){return b?b.querySelector("#"+a):void 0},c.insert=function(a,b,c){"undefined"!=typeof c?b.splice(c,0,a):b.push(a)},c.toNode=function(a){var b=document.createElement("div");return b.innerHTML=a,b.removeChild(b.firstElementChild)},c.hasDom=function(){return"undefined"!=typeof document};var d=0;c.uniqueId=function(a){return(a||"id")+ ++d*Math.round(1e5*Math.random())},c.keys=function(a){var b=[];for(var c in a)b.push(c);return b},c.isPlainObject=function(a){if(!a)return!1;var b=(a.constructor||"").toString();return!!~b.indexOf("Object")}},{}],7:[function(a,b){function c(a){return this instanceof c?a?d(a,e):void 0:new c(a)}function d(a,b){for(var c in b)a[c]=b[c];return a}var e=c.prototype;b.exports=c,e.on=function(a,b){return this._cbs=this._cbs||{},(this._cbs[a]||(this._cbs[a]=[])).unshift(b),this},e.off=function(a,b){if(this._cbs=this._cbs||{},!a)return this._cbs={};if(!b)return delete this._cbs[a];for(var c,d=this._cbs[a]||[];d&&~(c=d.indexOf(b));)d.splice(c,1);return this},e.fire=function(a){this._cbs=this._cbs||{};var b=a.name||a,c=a.ctx||this,d=this._cbs[b];if(d)for(var e=[].slice.call(arguments,1),f=d.length;f--;)d[f].apply(c,e);return this}},{}],3:[function(a,b){"use strict";function c(a){this._data=e({},a)}var d=a("event"),e=a("mixin");b.exports=c;var f=c.prototype;f.get=function(a){return void 0!==a&&a!==!1?this._data[a]:this._data},f.set=function(a,b){if("string"==typeof a&&"undefined"!=typeof b&&(this._data[a]=b,this.fire("change:"+a,b)),"object"==typeof a){e(this._data,a);for(var c in a)this.fire("change:"+c,a[c])}return this.fire("change"),this},f.clear=function(){return this._data={},this.fire("change"),this},f.destroy=function(){for(var a in this._data)this._data[a]=null;delete this._data,this.fire("destroy")},f.toJSON=function(){return e({},this._data)},d(f)},{event:8,mixin:9}],8:[function(a,b){function c(a){return this instanceof c?a?d(a,e):void 0:new c(a)}function d(a,b){for(var c in b)a[c]=b[c];return a}var e=c.prototype;b.exports=c,e.on=function(a,b){return this._cbs=this._cbs||{},(this._cbs[a]||(this._cbs[a]=[])).unshift(b),this},e.off=function(a,b){if(this._cbs=this._cbs||{},!a)return this._cbs={};if(!b)return delete this._cbs[a];for(var c,d=this._cbs[a]||[];d&&~(c=d.indexOf(b));)d.splice(c,1);return this},e.fire=function(a){this._cbs=this._cbs||{};var b=a.name||a,c=a.ctx||this,d=this._cbs[b];if(d)for(var e=[].slice.call(arguments,1),f=d.length;f--;)d[f].apply(c,e);return this}},{}],9:[function(a,b){"use strict";var c={}.hasOwnProperty;b.exports=function(a){for(var b,d,e=arguments,f=e.length,g=0;++g<f;){b=e[g];for(d in b)c.call(b,d)&&(a[d]=b[d])}return a}},{}],5:[function(a,b){"use strict";var c=a("utils"),d=a("./events"),e=a("extend"),f=c.mixin;b.exports=function(a){function b(a){a=f({},a),this._configure(a),this._add(a.children),this.fireStatic("before initialize",a),this.initialize&&this.initialize(a),this.fireStatic("initialize",a)}var g=b.prototype;return g._configure=function(b){this._id=b.id||c.uniqueId(),this._fmid=b.fmid||c.uniqueId("fmid"),this.tag=b.tag||this.tag||"div",this.classes=b.classes||this.classes||[],this.helpers=b.helpers||this.helpers||[],this.template=this._setTemplate(b.template||this.template),this.slot=b.slot,this.children=[],this._ids={},this._modules={},this.slots={};var d=b.model||b.data||{};this.model=c.isPlainObject(d)?new this.Model(d):d,this.helpers.forEach(this.attachHelper,this),b.fmid&&(a.fire("inflation",this,b),this.fireStatic("inflation",b))},g._add=function(a){if(a){var b,d=c.isArray(a);for(var e in a)b=a[e],d||(b.slot=e),this.add(b)}},g.attachHelper=function(a){a&&a(this)},g._setTemplate=function(a){return a&&a.render?c.bind(a.render,a):a},g.add=function(d,e){if(!d)return this;var f=e&&e.at,g=e&&e.inject,h="object"==typeof e?e.slot:e;d.parent&&d.remove({fromDOM:!1}),h=d.slot=h||d.slot;var i=this.slots[h];return i&&i.remove({fromDOM:!1}),d instanceof b||(d=a(d)),c.insert(d,this.children,f),this._addLookup(d),g&&this._injectEl(d.el,e),this},g.remove=function(a,c){if(1===arguments.length&&!a)return this;if(a instanceof b)return a.remove(c||{}),this;var d,e=a||{},f=e.fromDOM!==!1,g=this.parent,h=this.el,i=h&&h.parentNode;return f&&i&&i.removeChild(h),g&&(d=g.children.indexOf(this),g.children.splice(d,1),g._removeLookup(this)),this},g._addLookup=function(a){var b=a.module();(this._modules[b]=this._modules[b]||[]).push(a),this._ids[a.id()]=a,a.slot&&(this.slots[a.slot]=a),a.parent=this},g._removeLookup=function(a){var b=a.module(),c=this._modules[b].indexOf(a);this._modules[b].splice(c,1),delete this._ids[a._id],delete this.slots[a.slot],delete a.parent},g._injectEl=function(a,b){var c=b&&b.at,d=this.el;a&&d&&("undefined"!=typeof c?d.insertBefore(a,d.children[c]):d.appendChild(a))},g.id=function(a){if(!arguments.length)return this._id;var b=this._ids[a];return b?b:this.each(function(b){return b.id(a)})},g.module=function(a){if(!arguments.length)return this._module||this.name;var b=this._modules[a];return b&&b.length?b[0]:this.each(function(b){return b.module(a)})},g.modules=function(a){var b=this._modules[a]||[];return this.each(function(c){b=b.concat(c.modules(a))}),b},g.each=function(a){for(var b,c=this.children.length,d=0;c>d;d++)if(b=a(this.children[d]))return b},g.toHTML=function(){var a=this._innerHTML();return this._wrapHTML(a)},g._innerHTML=function(){this.fireStatic("before tohtml");var b,c,d={};return d[a.config.templateIterator]=[],this.each(function(e){c={},b=e.toHTML(),d[e.slot||e.id()]=b,c[a.config.templateInstance]=b,d.children.push(f(c,e.model.toJSON()))}),this.template?this.template(f(d,this.model.toJSON())):""},g._wrapHTML=function(a){return"<"+this.tag+' class="'+this._classes().join(" ")+'" id="'+this._fmid+'">'+a+"</"+this.tag+">"},g._classes=function(){return[this.module()].concat(this.classes)},g.render=function(){this.fireStatic("before render");var a,b=this.el;return b&&b.tagName===this.tag.toUpperCase()?(b.innerHTML=this._innerHTML(),a=b.className.split(/\s+/),this._classes().forEach(function(c){~a.indexOf(c)||(b.className=b.className+" "+c)})):this._setEl(c.toNode(this.toHTML())),this._fetchEls(this.el),this.fireStatic("render"),this},g.setup=function(a){var b=a&&a.shallow;return this._getEl()?(this.isSetup&&this.teardown({shallow:!0}),this.fireStatic("before setup"),this._setup&&this._setup(),this.fireStatic("setup"),this.isSetup=!0,b||this.each(function(a){a.setup()}),this):this},g.teardown=function(a){var b=a&&a.shallow;return b||this.each(function(a){a.teardown()}),this.isSetup&&(this.fireStatic("before teardown"),this._teardown&&this._teardown(),this.fireStatic("teardown"),this.isSetup=!1),this},g.destroy=function(a){a=a||{};for(var b=a.remove!==!1,c=this.children.length;c--;)this.children[c].destroy({remove:!1});return this.destroyed?this:(b&&this.remove(a),this.teardown({shallow:!0}),this.fireStatic("before destroy"),this._destroy&&this._destroy(),this.fireStatic("destroy"),this.off(),this.destroyed=!0,void(this.el=this.model=this.parent=this._modules=this._ids=this._id=null))},g.empty=function(){for(var a=this.children.length;a--;)this.children[a].destroy();return this},g._fetchEls=function(a){a&&this.each(function(b){b.el=c.byId(b._fmid,a),b._fetchEls(b.el||a)})},g._getEl=function(){return c.hasDom()?this.el=this.el||document.getElementById(this._fmid):void 0},g._setEl=function(a){var b=this.el,c=b&&b.parentNode;return c&&c.replaceChild(a,b),this.el=a,this},g.inject=function(a){return a&&(a.innerHTML="",this.insertBefore(a,null),this.fireStatic("inject")),this},g.appendTo=function(a){return this.insertBefore(a,null)},g.insertBefore=function(a,b){return this.el&&a&&a.insertBefore&&(a.insertBefore(this.el,b),this.fireStatic("appendto")),this},g.toJSON=function(){var a={};return a.children=[],this.each(function(b){a.children.push(b.toJSON())}),a.id=this.id(),a.fmid=this._fmid,a.module=this.module(),a.model=this.model.toJSON(),a.slot=this.slot,this.fireStatic("tojson",a),a},g.on=d.on,g.off=d.off,g.fire=d.fire,g.fireStatic=d.fireStatic,b.extend=e(c.keys(g)),g.Model=a.Model,b}},{"./events":10,extend:11,utils:6}],10:[function(a,b,c){function d(a,b,c){a&&c.propagate&&(a.event=c,e.prototype.fire.apply(a,b),d(a.parent,b,c))}var e=a("event"),f={};c.on=function(a,b,c){var d;return"string"!=typeof b&&(c=b,b=null),b?(f[a]||(f[a]=[]),d=f[a].push({orig:c,cb:function(){this.event.target.module()===b&&c.apply(this,arguments)}}),e.prototype.on.call(this,a,f[a][d-1].cb)):e.prototype.on.call(this,a,c),this},c.off=function(a,b,c){return"string"!=typeof b&&(c=b,b=null),f[a]&&(f[a]=f[a].filter(function(b){return c&&b.orig!==c?!0:(e.prototype.off.call(this,a,b.cb),!1)},this)),b||e.prototype.off.call(this,a,c),this},c.fire=function(){var a=this.event,b={target:this,propagate:!0,stopPropagation:function(){this.propagate=!1}};return d(this,arguments,b),a?this.event=a:delete this.event,this},c.fireStatic=e.prototype.fire},{event:7}],11:[function(a,b){"use strict";function c(a,b){for(var c in b)b.hasOwnProperty(c)&&~a.indexOf(c)&&(b["_"+c]=b[c],delete b[c])}var d=a("utils").mixin;b.exports=function(a){return function(b){function e(){this.constructor=g}var f=this,g=function(){return f.apply(this,arguments)};return d(g,f),a&&c(a,b),e.prototype=f.prototype,g.prototype=new e,d(g.prototype,b),g.__super__=f.prototype,g}}},{utils:12}],12:[function(a,b,c){"use strict";c.bind=function(a,b){return function(){return a.apply(b,arguments)}},c.isArray=function(a){return a instanceof Array},c.mixin=function(a,b){for(var c in b)a[c]=b[c];return a},c.byId=function(a,b){return b?b.querySelector("#"+a):void 0},c.insert=function(a,b,c){"undefined"!=typeof c?b.splice(c,0,a):b.push(a)},c.toNode=function(a){var b=document.createElement("div");return b.innerHTML=a,b.removeChild(b.firstElementChild)},c.hasDom=function(){return"undefined"!=typeof document};var d=0;c.uniqueId=function(a){return(a||"id")+ ++d*Math.round(1e5*Math.random())},c.keys=function(a){var b=[];for(var c in a)b.push(c);return b},c.isPlainObject=function(a){if(!a)return!1;var b=(a.constructor||"").toString();return!!~b.indexOf("Object")}},{}]},{},[1])(1)});