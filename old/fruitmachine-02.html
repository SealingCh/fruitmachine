<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>title</title>
</head>
<body>
	<div id='app'></div>
<script type="text/javascript" src="hogan.js"></script>
<script type="text/javascript" src="fruitmachine-02.js"></script>
<script type="text/javascript" src="fruitmachineviews-02.js"></script>
<script>


var templates = {
	'fruit/layout-i': '<div class="layout-i"><div class="js-slot" data-slot="1">{{{slot_1}}}</div><div class="js-slot" data-slot="2">{{{slot_2}}}</div><div class="js-slot" data-slot="3">{{{slot_3}}}</div></div>',
	'fruit/module-apple': '<div class="module-apple"><h1>{{title}}</h1><div>{{body}}</div></div>',
	'fruit/module-orange': '<div class="module-orange"><h1>This is module orange title</h1><div>This is module orange body</div></div>',
	'fruit/module-tangerine': '<div class="module-tangerine">{{#slots}}<h2>{{title}}</h2><div class="js-slot" data-slot="{{id}}">{{{html}}}</div>{{/slots}}</div>',
	'fruit/module-sharon': '<div class="module-sharon">{{#items}}<h4>{{title}}</h4><div>{{body}}</div>{{/items}}</div>'
};



var structure = {
	_id: 'master',
	module: 'i',
	template: Hogan.compile(templates['fruit/layout-i']),
	children: [
		{
			_id: 1,
			module: 'apple',
			template: Hogan.compile(templates['fruit/module-apple']),
			data: {
				title: 'This is apples title',
				body: 'This is apples body'
			}
		},
		{
			_id: 2,
			module: 'orange',
			template: Hogan.compile(templates['fruit/module-orange'])
		},
		{
			_id: 3,
			module: 'tangerine',
			template: Hogan.compile(templates['fruit/module-tangerine']),
			render: false,
			children: [
				{
					_id: 4,
					module: 'sharon',
					template: Hogan.compile(templates['fruit/module-sharon'])
				},
				{
					_id: 5,
					module: 'sharon',
					template: Hogan.compile(templates['fruit/module-sharon'])
				},
				{
					_id: 6,
					module: 'sharon',
					template: Hogan.compile(templates['fruit/module-sharon']),
					render: false,
					data: {
						title: 'test title three',
						items: [
							{
								title: 'item 1',
								body: 'item 1 body'
							},
							{
								title: 'item 2',
								body: 'item 2 body'
							},
							{
								title: 'item 3',
								body: 'item 3 body'
							}
						]
					}
				}
			]
		}
	]
};


var myBreakpoints = new FruitMachine.Breakpoints({
	'smallscreen': 400,
	'mediumscreen': 800,
	'largescreen': 99999
});


console.time('yo');

var myModel = new FruitMachine.Model(structure);
var myView = new FruitMachine.View({
	model: myModel,
	root: document.getElementById('app')
});

myView
	.render()
	.setup();

console.timeEnd('yo');


setTimeout(function() {

	console.time('foo');

	var tangerineModel = myModel.child('tangerine');

	tangerineModel.id(4).set({
		title: 'test title',
		items: [
			{
				title: 'item 1',
				body: 'item 1 body'
			},
			{
				title: 'item 2',
				body: 'item 2 body'
			},
			{
				title: 'item 3',
				body: 'item 3 body'
			}
		]
	});

	tangerineModel.id(5).set({
		title: 'test title 2',
		items: [
			{
				title: 'item 1',
				body: 'item 1 body'
			},
			{
				title: 'item 2',
				body: 'item 2 body'
			},
			{
				title: 'item 3',
				body: 'item 3 body'
			}
		]
	});

	myView
		.addView(tangerineModel)
		.render()
		.setup();

	console.timeEnd('foo');

}, 2000);



</script>
</body>
</html>